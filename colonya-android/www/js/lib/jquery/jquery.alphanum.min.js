!function(e){function h(){var e="!@#$%^&*()+=[]\\';,/{}|\":<>?~`.-_";return e+=" "}function u(){var e="¬€£¦";return e}function p(t,i,r){t.each(function(){var t=e(this);t.bind("keyup change paste",function(e){var n="";e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),setTimeout(function(){v(t,i,r,n)},0)}),t.bind("keypress",function(e){var n=e.charCode?e.charCode:e.which;if(!(g(n)||e.ctrlKey||e.metaKey)){var s=String.fromCharCode(n),a=t.selection(),o=a.start,l=a.end,c=t.val(),h=c.substring(0,o)+s+c.substring(l),u=i(h,r);u!=h&&e.preventDefault()}})})}function f(t,i){var r=parseFloat(e(t).val()),n=e(t);return isNaN(r)?void n.val(""):(d(i.min)&&r<i.min&&n.val(""),void(d(i.max)&&r>i.max&&n.val("")))}function d(e){return!isNaN(e)}function g(e){return e>=32?!1:10==e?!1:13==e?!1:!0}function v(e,t,i,r){var n=e.val();""==n&&r.length>0&&(n=r);var s=t(n,i);if(n!=s){var a=e.alphanum_caret();e.val(s),e.alphanum_caret(n.length==s.length+1?a-1:a)}}function m(i,n){"undefined"==typeof n&&(n=t);var s,a={};return s="string"==typeof i?r[i]:"undefined"==typeof i?{}:i,e.extend(a,n,s),"undefined"==typeof a.blacklist&&(a.blacklistSet=L(a.allow,a.disallow)),a}function y(t){var r,s={};return r="string"==typeof t?n[t]:"undefined"==typeof t?{}:t,e.extend(s,i,r),s}function k(e,t,i){return i.maxLength&&e.length>=i.maxLength?!1:i.allow.indexOf(t)>=0?!0:i.allowSpace&&" "==t?!0:i.blacklistSet.contains(t)?!1:!i.allowNumeric&&l[t]?!1:!i.allowUpper&&I(t)?!1:!i.allowLower&&B(t)?!1:!i.allowCaseless&&A(t)?!1:!i.allowLatin&&c.contains(t)?!1:i.allowOtherCharSets?!0:l[t]||c.contains(t)?!0:!1}function S(e,t,i){if(l[t])return _(e,i)?!1:w(e,i)?!1:b(e,i)?!1:E(e+t,i)?!1:C(e+t,i)?!1:!0;if(i.allowPlus&&"+"==t&&""==e)return!0;if(i.allowMinus&&"-"==t&&""==e)return!0;if(t==a&&i.allowThouSep&&R(e,t))return!0;if(t==o){if(e.indexOf(o)>=0)return!1;if(i.allowDecSep)return!0}return!1}function x(e){return e+="",e.replace(/[^0-9]/g,"").length}function _(e,t){var i=t.maxDigits;if(""==i||isNaN(i))return!1;var r=x(e);return r>=i?!0:!1}function b(e,t){var i=t.maxDecimalPlaces;if(""==i||isNaN(i))return!1;var r=e.indexOf(o);if(-1==r)return!1;var n=e.substring(r),s=x(n);return s>=i?!0:!1}function w(e,t){var i=t.maxPreDecimalPlaces;if(""==i||isNaN(i))return!1;var r=e.indexOf(o);if(r>=0)return!1;var n=x(e);return n>=i?!0:!1}function E(e,t){if(!t.max||t.max<0)return!1;var i=parseFloat(e);return i>t.max?!0:!1}function C(e,t){if(!t.min||t.min>0)return!1;var i=parseFloat(e);return i<t.min?!0:!1}function N(e,t){if("string"!=typeof e)return e;var s,i=e.split(""),r=[],n=0;for(n=0;n<i.length;n++){s=i[n];var a=r.join("");k(a,s,t)&&r.push(s)}var o=r.join("");return t.forceLower?o=o.toLowerCase():t.forceUpper&&(o=o.toUpperCase()),o}function P(e,t){if("string"!=typeof e)return e;var s,i=e.split(""),r=[],n=0;for(n=0;n<i.length;n++){s=i[n];var a=r.join("");S(a,s,t)&&r.push(s)}return r.join("")}function I(e){var t=e.toUpperCase(),i=e.toLowerCase();return e==t&&t!=i?!0:!1}function B(e){var t=e.toUpperCase(),i=e.toLowerCase();return e==i&&t!=i?!0:!1}function A(e){return e.toUpperCase()==e.toLowerCase()?!0:!1}function L(e,t){var i=new H(s+t),r=new H(e),n=i.subtract(r);return n}function D(){var r,e="0123456789".split(""),t={},i=0;for(i=0;i<e.length;i++)r=e[i],t[r]=!0;return t}function M(){var e="abcdefghijklmnopqrstuvwxyz",t=e.toUpperCase(),i=new H(e+t);return i}function R(e){if(0==e.length)return!1;var i=e.indexOf(o);if(i>=0)return!1;var r=e.indexOf(a);if(0>r)return!0;var n=e.lastIndexOf(a),s=e.length-n-1;if(3>s)return!1;var l=x(e.substring(r));return l%3>0?!1:!0}function H(e){this.map="string"==typeof e?$(e):{}}function $(e){var n,t={},i=e.split(""),r=0;for(r=0;r<i.length;r++)n=i[r],t[n]=!0;return t}e.fn.alphanum=function(e){var t=m(e),i=this;return p(i,N,t),this},e.fn.alpha=function(e){var t=m("alpha"),i=m(e,t),r=this;return p(r,N,i),this},e.fn.numeric=function(e){var t=y(e),i=this;return p(i,P,t),i.blur(function(){f(this,e)}),this};var t={allow:"",disallow:"",allowSpace:!0,allowNumeric:!0,allowUpper:!0,allowLower:!0,allowCaseless:!0,allowLatin:!0,allowOtherCharSets:!0,forceUpper:!1,forceLower:!1,maxLength:0/0},i={allowPlus:!1,allowMinus:!0,allowThouSep:!0,allowDecSep:!0,allowLeadingSpaces:!1,maxDigits:0/0,maxDecimalPlaces:0/0,maxPreDecimalPlaces:0/0,max:0/0,min:0/0},r={alpha:{allowNumeric:!1},upper:{allowNumeric:!1,allowUpper:!0,allowLower:!1,allowCaseless:!0},lower:{allowNumeric:!1,allowUpper:!1,allowLower:!0,allowCaseless:!0}},n={integer:{allowPlus:!1,allowMinus:!0,allowThouSep:!1,allowDecSep:!1},positiveInteger:{allowPlus:!1,allowMinus:!1,allowThouSep:!1,allowDecSep:!1}},s=h()+u(),a=",",o=".",l=D(),c=M();H.prototype.add=function(e){var t=this.clone();for(var i in e.map)t.map[i]=!0;return t},H.prototype.subtract=function(e){var t=this.clone();for(var i in e.map)delete t.map[i];return t},H.prototype.contains=function(e){return this.map[e]?!0:!1},H.prototype.clone=function(){var e=new H;for(var t in this.map)e.map[t]=!0;return e},e.fn.alphanum.backdoorAlphaNum=function(e,t){var i=m(t);return N(e,i)},e.fn.alphanum.backdoorNumeric=function(e,t){var i=y(t);return P(e,i)},e.fn.alphanum.setNumericSeparators=function(e){1==e.thousandsSeparator.length&&1==e.decimalSeparator.length&&(a=e.thousandsSeparator,o=e.decimalSeparator)}}(jQuery),function(e){function t(e,t){if(e.createTextRange){var i=e.createTextRange();i.move("character",t),i.select()}else null!=e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function i(e){if("selection"in document){var t=e.createTextRange();try{t.setEndPoint("EndToStart",document.selection.createRange())}catch(i){return 0}return t.text.length}return null!=e.selectionStart?e.selectionStart:void 0}e.fn.alphanum_caret=function(r,n){return"undefined"==typeof r?i(this.get(0)):this.queue(function(i){if(isNaN(r)){var s=e(this).val().indexOf(r);n===!0?s+=r.length:"undefined"!=typeof n&&(s+=n),t(this,s)}else t(this,r);i()})}}(jQuery),function(e){var r=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},n=function(t){var r=e.Range.current(t).clone(),n=e.Range(t).select(t);return r.overlaps(n)?(r.compare("START_TO_START",n)<1?(startPos=0,r.move("START_TO_START",n)):(fromElementToCurrent=n.clone(),fromElementToCurrent.move("END_TO_START",r),startPos=fromElementToCurrent.toString().length),endPos=r.compare("END_TO_END",n)>=0?n.toString().length:startPos+r.toString().length,{start:startPos,end:endPos}):null},s=function(t){var i=r(t);if(void 0!==t.selectionStart)return document.activeElement&&document.activeElement!=t&&t.selectionStart==t.selectionEnd&&0==t.selectionStart?{start:t.value.length,end:t.value.length}:{start:t.selectionStart,end:t.selectionEnd};if(i.getSelection)return n(t,i);try{if("input"==t.nodeName.toLowerCase()){var s=r(t).document.selection.createRange(),a=t.createTextRange();a.setEndPoint("EndToStart",s);var o=a.text.length;return{start:o,end:o+s.text.length}}var l=n(t,i);if(!l)return l;var c=e.Range.current().clone(),h=c.clone().collapse().range,u=c.clone().collapse(!1).range;return h.moveStart("character",-1),u.moveStart("character",-1),0!=l.startPos&&""==h.text&&(l.startPos+=2),0!=l.endPos&&""==u.text&&(l.endPos+=2),l}catch(p){return{start:t.value.length,end:t.value.length}}},a=function(e,t,i){var n=r(e);if(e.setSelectionRange)void 0===i?(e.focus(),e.setSelectionRange(t,t)):(e.select(),e.selectionStart=t,e.selectionEnd=i);else if(e.createTextRange){var s=e.createTextRange();s.moveStart("character",t),i=i||t,s.moveEnd("character",i-e.value.length),s.select()}else if(n.getSelection){var a=n.document,o=n.getSelection(),c=a.createRange(),h=[t,void 0!==i?i:t];l([e],h),c.setStart(h[0].el,h[0].count),c.setEnd(h[1].el,h[1].count),o.removeAllRanges(),o.addRange(c)}else if(n.document.body.createTextRange){var c=document.body.createTextRange();c.moveToElementText(e),c.collapse(),c.moveStart("character",t),c.moveEnd("character",void 0!==i?i:t),c.select()}},o=function(e,t,i,r){"number"==typeof i[0]&&i[0]<t&&(i[0]={el:r,count:i[0]-e}),"number"==typeof i[1]&&i[1]<=t&&(i[1]={el:r,count:i[1]-e})},l=function(e,t,i){var r,n;i=i||0;for(var s=0;e[s];s++)r=e[s],3===r.nodeType||4===r.nodeType?(n=i,i+=r.nodeValue.length,o(n,i,t,r)):8!==r.nodeType&&(i=l(r.childNodes,t,i));return i};jQuery.fn.selection=function(e,t){return void 0!==e?this.each(function(){a(this,e,t)}):s(this[0])},e.fn.selection.getCharElement=l}(jQuery);